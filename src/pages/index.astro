---
import '../styles/global.css';
---

<html lang="en" class="dark">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Sentry.new - Astro Template</title>
		<!-- SentryVibe HMR Proxy - intercepts Vite HMR WebSocket for remote preview -->
		<script is:inline>
		(function(){if(window===window.parent)return;if(window.__sentryvibeHmrProxyInit)return;window.__sentryvibeHmrProxyInit=true;var O=window.WebSocket,C=new Map;function F(url,protocols){this.url=url;this.protocols=protocols;this.readyState=WebSocket.CONNECTING;this.bufferedAmount=0;this.extensions='';this.protocol=Array.isArray(protocols)?protocols[0]:(protocols||'');this.binaryType='blob';this.onopen=null;this.onclose=null;this.onmessage=null;this.onerror=null;this._listeners={open:[],close:[],message:[],error:[]};this._connectionId='hmr-'+Math.random().toString(36).substring(2,11);C.set(this._connectionId,this);this._requestConnect();}F.prototype._requestConnect=function(){var port=5173;try{var u=new URL(this.url);port=parseInt(u.port,10)||(u.protocol==='wss:'?443:80);}catch(e){}window.parent.postMessage({type:'sentryvibe:hmr:connect',connectionId:this._connectionId,port:port,protocol:this.protocol},'*');};F.prototype.send=function(data){if(this.readyState!==WebSocket.OPEN)throw new DOMException('WebSocket is not open','InvalidStateError');window.parent.postMessage({type:'sentryvibe:hmr:send',connectionId:this._connectionId,message:typeof data==='string'?data:JSON.stringify(data)},'*');};F.prototype.close=function(code,reason){if(this.readyState===WebSocket.CLOSING||this.readyState===WebSocket.CLOSED)return;this.readyState=WebSocket.CLOSING;window.parent.postMessage({type:'sentryvibe:hmr:disconnect',connectionId:this._connectionId,code:code||1000,reason:reason||''},'*');C.delete(this._connectionId);};F.prototype.addEventListener=function(type,listener){if(this._listeners[type])this._listeners[type].push(listener);};F.prototype.removeEventListener=function(type,listener){if(this._listeners[type]){var idx=this._listeners[type].indexOf(listener);if(idx!==-1)this._listeners[type].splice(idx,1);}};F.prototype.dispatchEvent=function(event){var listeners=this._listeners[event.type]||[];for(var i=0;i<listeners.length;i++)listeners[i].call(this,event);var handler=this['on'+event.type];if(typeof handler==='function')handler.call(this,event);return true;};F.prototype._onConnected=function(){this.readyState=WebSocket.OPEN;this.dispatchEvent(new Event('open'));};F.prototype._onMessage=function(data){this.dispatchEvent(new MessageEvent('message',{data:data}));};F.prototype._onClosed=function(code,reason){this.readyState=WebSocket.CLOSED;C.delete(this._connectionId);this.dispatchEvent(new CloseEvent('close',{code:code,reason:reason,wasClean:code===1000}));};F.prototype._onError=function(msg){this.dispatchEvent(new Event('error'));};F.CONNECTING=0;F.OPEN=1;F.CLOSING=2;F.CLOSED=3;function shouldIntercept(url,protocols){if(protocols){var list=Array.isArray(protocols)?protocols:[protocols];if(list.includes('vite-hmr'))return true;}try{var u=new URL(url,window.location.href);var isLocal=u.hostname==='localhost'||u.hostname==='127.0.0.1'||u.hostname==='0.0.0.0';var isHmr=u.pathname==='/'||u.pathname.includes('/__vite')||u.pathname.includes('/ws');var isDevPort=[3000,3001,4321,5173,5174,8080,8081].includes(parseInt(u.port,10));return isLocal&&(isHmr||isDevPort);}catch(e){return false;}}var P=function(url,protocols){if(shouldIntercept(url,protocols))return new F(url,protocols);return new O(url,protocols);};P.CONNECTING=WebSocket.CONNECTING;P.OPEN=WebSocket.OPEN;P.CLOSING=WebSocket.CLOSING;P.CLOSED=WebSocket.CLOSED;P.prototype=O.prototype;window.WebSocket=P;window.addEventListener('message',function(e){if(e.source!==window.parent)return;var d=e.data||{},type=d.type,connectionId=d.connectionId;if(!type||!type.startsWith('sentryvibe:hmr:'))return;var conn=C.get(connectionId);if(!conn)return;if(type==='sentryvibe:hmr:connected')conn._onConnected();else if(type==='sentryvibe:hmr:message')conn._onMessage(d.message);else if(type==='sentryvibe:hmr:closed')conn._onClosed(d.code||1000,d.reason||'');else if(type==='sentryvibe:hmr:error')conn._onError(d.error||'Unknown error');});window.parent.postMessage({type:'sentryvibe:hmr:ready'},'*');})();
		</script>
	</head>
	<body class="bg-background text-foreground">
		<div class="font-sans min-h-screen p-8 pb-20 sm:p-20">
			<main class="container mx-auto max-w-6xl flex flex-col gap-12 items-center">
				<div class="flex flex-col items-center text-center space-y-8 max-w-4xl pt-16">
					<div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-secondary/50 border border-primary/30 text-sm font-medium">
						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
							<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
						</svg>
						Powered by Sentry.New
					</div>

					<h1 class="text-5xl sm:text-7xl font-black tracking-tight">
						Astro{" "}
						<span class="bg-gradient-to-r from-primary via-accent to-primary bg-clip-text text-transparent">
							Template
						</span>
					</h1>

					<p class="text-lg sm:text-xl text-muted-foreground max-w-2xl">
						A production-ready Astro template with Sentry monitoring, Tailwind CSS, and lightning-fast performance.
					</p>

					<div class="flex gap-4 items-center flex-col sm:flex-row pt-4">
						<a
							class="rounded-full border border-solid border-primary bg-primary text-primary-foreground transition-colors flex items-center justify-center hover:bg-primary/90 font-medium text-sm sm:text-base h-10 sm:h-12 px-6"
							href="https://sentry.new"
							target="_blank"
							rel="noopener noreferrer"
						>
							Get Started
						</a>
						<a
							class="rounded-full border border-solid border-border transition-colors flex items-center justify-center hover:bg-secondary hover:border-primary font-medium text-sm sm:text-base h-10 sm:h-12 px-6"
							href="https://docs.astro.build"
							target="_blank"
							rel="noopener noreferrer"
						>
							Read Docs
						</a>
					</div>
				</div>

				<!-- Sentry Integration Section -->
				<div class="mt-8 w-full max-w-4xl">
					<div class="border-2 border-primary/30 rounded-lg bg-card/50 backdrop-blur p-6">
						<div class="flex items-center gap-2 mb-3">
							<svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
							</svg>
							<h2 class="text-2xl font-bold">Sentry Integration</h2>
						</div>
						<p class="text-base text-muted-foreground mb-8">
							Add error tracking and performance monitoring in seconds
						</p>

						<div class="space-y-6">
							<div>
								<p class="text-sm text-muted-foreground mb-3 font-medium">Install Sentry SDK:</p>
								<pre class="bg-secondary/30 border border-primary/20 p-4 rounded-lg overflow-x-auto"><code class="text-sm font-mono text-primary">npx astro add @sentry/astro
npm install @sentry/profiling-node</code></pre>
							</div>

							<div>
								<p class="text-sm text-muted-foreground mb-3 font-medium">Initialize in sentry.client.config.js:</p>
								<pre class="bg-secondary/30 border border-primary/20 p-5 rounded-lg overflow-x-auto"><code class="text-sm font-mono text-foreground leading-relaxed">import * as Sentry from &quot;@sentry/astro&quot;;

Sentry.init(&lbrace;
  dsn: &quot;YOUR_SENTRY_DSN&quot;,

  integrations: &lbrack;
    Sentry.browserTracingIntegration(),
    Sentry.replayIntegration(),
  &rbrack;,

  // Set tracesSampleRate to 1.0 to capture 100%
  // of transactions for tracing.
  tracesSampleRate: 1.0,

  // Capture Replay for 10% of all sessions,
  // plus for 100% of sessions with an error
  replaysSessionSampleRate: 0.1,
  replaysOnErrorSampleRate: 1.0,
&rbrace;);</code></pre>
							</div>

							<div class="flex items-center gap-2 pt-2">
								<a
									href="https://docs.sentry.io/platforms/javascript/guides/astro/"
									target="_blank"
									rel="noopener noreferrer"
									class="text-sm text-primary hover:text-primary/80 font-medium flex items-center gap-1"
								>
									View full documentation
									<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
									</svg>
								</a>
							</div>
						</div>
					</div>
				</div>
			</main>
			<footer class="row-start-3 flex gap-6 flex-wrap items-center justify-center text-sm text-muted-foreground">
				<a
					class="flex items-center gap-2 hover:underline hover:underline-offset-4 hover:text-foreground transition-colors"
					href="https://docs.astro.build"
					target="_blank"
					rel="noopener noreferrer"
				>
					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
					</svg>
					Learn
				</a>
				<a
					class="flex items-center gap-2 hover:underline hover:underline-offset-4 hover:text-foreground transition-colors"
					href="https://astro.build/themes"
					target="_blank"
					rel="noopener noreferrer"
				>
					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z" />
					</svg>
					Examples
				</a>
				<a
					class="flex items-center gap-2 hover:underline hover:underline-offset-4 hover:text-foreground transition-colors"
					href="https://sentry.new"
					target="_blank"
					rel="noopener noreferrer"
				>
					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
					</svg>
					Go to sentry.new â†’
				</a>
			</footer>
		</div>
		<!-- SentryVibe Selection Script - enables element selection in preview -->
		<script is:inline>
		(function() {
			let isInspectorActive = false;
			let inspectorStyle = null;
			let highlightedElement = null;
			let highlightOverlay = null;
			let mouseHandler = null;
			let clickHandler = null;

			function createHighlightOverlay() {
				if (highlightOverlay) return highlightOverlay;
				const overlay = document.createElement('div');
				overlay.id = '__sentryvibe-highlight';
				overlay.style.cssText = 'position: absolute; pointer-events: none; border: 2px solid #7553FF; background: rgba(117, 83, 255, 0.1); z-index: 999999; transition: all 0.1s ease; box-shadow: 0 0 0 1px rgba(117, 83, 255, 0.3), 0 0 20px rgba(117, 83, 255, 0.4);';
				document.body.appendChild(overlay);
				highlightOverlay = overlay;
				return overlay;
			}

			function removeHighlightOverlay() {
				if (highlightOverlay) { highlightOverlay.remove(); highlightOverlay = null; }
			}

			function highlightElement(element) {
				if (!element || !isInspectorActive) { removeHighlightOverlay(); return; }
				const rect = element.getBoundingClientRect();
				const overlay = createHighlightOverlay();
				overlay.style.left = rect.left + window.scrollX + 'px';
				overlay.style.top = rect.top + window.scrollY + 'px';
				overlay.style.width = rect.width + 'px';
				overlay.style.height = rect.height + 'px';
				highlightedElement = element;
			}

			function generateSelector(element) {
				const testId = element.getAttribute('data-testid');
				if (testId) return '[data-testid="' + testId + '"]';
				if (element.id) return '#' + element.id;
				const classes = Array.from(element.classList).filter(c => !c.match(/^(hover:|focus:|active:|group-|animate-|transition-)/) && !c.includes(':')).slice(0, 3).join('.');
				if (classes) {
					const tagName = element.tagName.toLowerCase();
					try {
						const selector = tagName + '.' + classes;
						const matches = document.querySelectorAll(selector);
						if (matches.length === 1) return selector;
						const parent = element.parentElement;
						if (parent) { const siblings = Array.from(parent.children); const index = siblings.indexOf(element) + 1; return selector + ':nth-child(' + index + ')'; }
						return selector;
					} catch (err) {}
				}
				return getFullPath(element);
			}

			function getFullPath(element) {
				const path = [];
				let current = element;
				while (current && current !== document.body) {
					let selector = current.tagName.toLowerCase();
					if (current.id) { selector += '#' + current.id; path.unshift(selector); break; }
					const parent = current.parentElement;
					if (parent) { const siblings = Array.from(parent.children).filter(child => child.tagName === current.tagName); if (siblings.length > 1) { const index = siblings.indexOf(current) + 1; selector += ':nth-of-type(' + index + ')'; } }
					path.unshift(selector);
					current = current.parentElement;
				}
				return path.join(' > ');
			}

			function captureElementData(element, clickEvent) {
				const rect = element.getBoundingClientRect();
				return {
					selector: generateSelector(element),
					tagName: element.tagName.toLowerCase(),
					className: element.className,
					id: element.id,
					textContent: element.textContent?.trim().slice(0, 100),
					innerHTML: element.innerHTML?.slice(0, 200),
					attributes: Array.from(element.attributes).reduce((acc, attr) => { acc[attr.name] = attr.value; return acc; }, {}),
					boundingRect: { top: rect.top, left: rect.left, width: rect.width, height: rect.height },
					clickPosition: { x: clickEvent.clientX, y: clickEvent.clientY },
					computedStyles: { backgroundColor: window.getComputedStyle(element).backgroundColor, color: window.getComputedStyle(element).color, fontSize: window.getComputedStyle(element).fontSize, fontFamily: window.getComputedStyle(element).fontFamily }
				};
			}

			function handleMouseMove(e) { if (!isInspectorActive) return; const element = e.target; if (element && element !== highlightedElement) highlightElement(element); }

			function handleClick(e) {
				if (!isInspectorActive) return;
				e.preventDefault(); e.stopPropagation();
				const element = e.target;
				const data = captureElementData(element, e);
				window.parent.postMessage({ type: 'sentryvibe:element-selected', data }, '*');
				setInspectorActive(false);
			}

			function setInspectorActive(active) {
				isInspectorActive = active;
				if (active) {
					if (!inspectorStyle) { inspectorStyle = document.createElement('style'); inspectorStyle.textContent = '.inspector-active * { cursor: crosshair !important; }'; document.head.appendChild(inspectorStyle); }
					document.body.classList.add('inspector-active');
					if (!mouseHandler) { mouseHandler = handleMouseMove; clickHandler = handleClick; document.addEventListener('mousemove', mouseHandler, true); document.addEventListener('click', clickHandler, true); }
				} else {
					document.body.classList.remove('inspector-active');
					highlightedElement = null;
					removeHighlightOverlay();
					if (mouseHandler) { document.removeEventListener('mousemove', mouseHandler, true); document.removeEventListener('click', clickHandler, true); mouseHandler = null; clickHandler = null; }
					if (inspectorStyle) { inspectorStyle.remove(); inspectorStyle = null; }
				}
			}

			window.addEventListener('message', (e) => { if (e.data.type === 'sentryvibe:toggle-selection-mode') setInspectorActive(e.data.enabled); });
			window.parent.postMessage({ type: 'sentryvibe:ready' }, '*');
		})();
		</script>
	</body>
</html>
